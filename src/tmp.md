**SharePoint リスト・ドキュメントライブラリのER図作成指示書**  

---

### **目的**  
本プロジェクトにおける **SharePoint リスト・ドキュメントライブラリ** をデータテーブルとして整理し、ER図を作成する。これにより、データ構造の把握を容易にし、システム設計を円滑に進めることを目的とする。  

---

### **作業ステップ**  

#### **1. SharePoint リスト・ドキュメントライブラリの洗い出し**  
**目的**: 既存のSharePointリストおよびドキュメントライブラリの全体像を明確にする。  

**手順:**  
1. **ExcelのPower Query** を使用し、対象の **SharePoint サイト** からリストおよびドキュメントライブラリを取得する。  
2. 必要な情報（リスト名、ライブラリ名、URL、作成日、最終更新日など）を一覧化する。  
3. 不要なリスト・ライブラリを除外し、対象範囲を確定する。  

**成果物:**  
- SharePoint リスト・ドキュメントライブラリの一覧表（Excel）  

---

#### **2. リスト・ドキュメントライブラリの詳細情報整理**  
**目的**: 各リスト・ライブラリの構造を明確化し、データモデリングの準備を行う。  

**手順:**  
1. 各リスト・ライブラリについて、以下の情報を取得し、**表形式** に整理する。  
   - **リスト・ライブラリ名**  
   - **列名（表示名）**  
   - **内部名（Internal Name）**  
   - **データ型（Type）**  
   - **必須項目か否か**  
   - **リレーションがある場合の関連リスト**  
2. 上記情報をExcelまたは表形式のドキュメントにまとめる。  

**成果物:**  
- SharePoint リスト・ドキュメントライブラリの **列情報一覧表**（Excel）  

---

#### **3. ER図の作成**  
**目的**: SharePoint リスト・ドキュメントライブラリをデータベースのテーブルとして整理し、視覚的に構造を理解できるようにする。  

**手順:**  
1. 収集したデータをもとに、各リスト・ライブラリをテーブルとして **ER図** に表現する。  
   - **エンティティ（リスト・ライブラリ）** を四角形で表現する。  
   - **属性（列情報）** を各エンティティの内部に記載する。  
   - **リレーション**（Lookup列や外部キー関係）を矢印で表す。  
2. 使用ツール: **Visio、draw.io、Lucidchart、PowerPoint など適宜選択**  
3. ER図を作成後、構造に問題がないかレビューを実施する。  

**成果物:**  
- **SharePoint リスト・ドキュメントライブラリのER図（PDFまたは画像形式）**  

---

### **納品物・フォーマット**  
| No | 成果物名 | フォーマット | 内容 |
|----|------------|------------|------------------------------|
| 1 | SharePointリスト・ドキュメントライブラリ一覧 | Excel | リスト・ライブラリの洗い出し |
| 2 | リスト・ライブラリの列情報一覧 | Excel | 各リスト・ライブラリの列詳細 |
| 3 | SharePoint ER図 | PDF / 画像 | データ構造の視覚化 |

---

### **スケジュール**  
| タスク | 期限 | 担当 |
|--------|------|------|
| 1. SharePointリスト・ライブラリの洗い出し | YYYY/MM/DD | (担当者名) |
| 2. 列情報の整理 | YYYY/MM/DD | (担当者名) |
| 3. ER図の作成 | YYYY/MM/DD | (担当者名) |
| 4. レビュー・修正 | YYYY/MM/DD | (担当者名) |

---

### **補足・注意点**  
- **Power Queryの利用方法** については、必要に応じてサポートを受けること。  
- **内部名（Internal Name）** はSharePointのリスト設定画面から取得する。  
- **リレーションの確認** は、Lookup列や外部キーの設定を必ず確認する。  
- **ER図作成ツールは自由** だが、チームで共有・編集しやすいものを選択する。  

---

### **指示対象者**  
- **(担当者名)**  

### **指示日**  
- **YYYY/MM/DD**  

### **指示者**  
- **(指示者名)**  

以上の流れで作業を進めてください。質問があれば適宜確認をお願いします。

**SharePoint リスト・ドキュメントライブラリの可視化および環境移行作業について**  

---

### **目的**  
本プロジェクトでは、**開発環境のデータ構造を可視化し、その内容をテスト環境・本番環境へ適切に移行する** ことを目的としています。まずは **SharePoint リスト・ドキュメントライブラリの構造を明確化（可視化）** し、その情報をもとに移行作業を実施していただきます。  

---

### **作業の流れ**  

#### **1. SharePoint リスト・ドキュメントライブラリの可視化**  
開発環境のデータ構造を整理し、テスト環境・本番環境への移行をスムーズに行うため、**現在のリスト・ドキュメントライブラリの構造を可視化** します。  

- **作業内容:**  
  - 開発環境に存在するリスト・ライブラリを洗い出し、一覧表を作成する。  
  - 各リスト・ライブラリの詳細（列名、データ型、リレーション）を整理する。  
  - ER図を作成し、データの関係性を視覚的に把握できるようにする。  

- **成果物:**  
  - SharePoint リスト・ライブラリの一覧表（Excel）  
  - 列情報一覧表（Excel）  
  - ER図（PDF / 画像）  

---

#### **2. テスト環境・本番環境への移行作業**  
可視化されたデータをもとに、**開発環境の内容をテスト環境・本番環境へ移行** します。  

- **作業内容:**  
  1. **不足しているリスト・ドキュメントライブラリの作成**  
     - 開発環境に存在し、テスト環境・本番環境にないリスト・ライブラリを特定し、新規作成する。  
  2. **不足している列項目の追加**  
     - 既存リスト・ライブラリに不足している列（カラム）を追加し、データ構造を一致させる。  
  3. **データの移行（必要に応じて）**  
     - 既存のデータを移行する場合、Power AutomateまたはExcelのインポート機能を活用する。  
  4. **権限設定の確認・調整**  
     - リストやライブラリのアクセス権限が開発環境と同じになるように設定を確認・調整する。  

- **手法:**  
  - **既存の手法を利用**（手順が確立されている場合は、従来の方法を適用）  
  - **Power Apps の段階的デプロイを活用**（アプリの公開プロセスを通じて、必要なリスト・ライブラリの設定を補完）  
  - **最適な手法を選択**（やりやすい方法で進める）  

- **成果物:**  
  - テスト環境・本番環境のリスト・ライブラリの更新状況一覧（Excel）  
  - 設定変更・追加作業の報告書  

---

### **スケジュール**  
| タスク | 期限 | 担当 |
|--------|------|------|
| 1. SharePointリスト・ライブラリの可視化 | YYYY/MM/DD | (担当者名) |
| 2. テスト環境への移行作業 | YYYY/MM/DD | (担当者名) |
| 3. 本番環境への移行作業 | YYYY/MM/DD | (担当者名) |
| 4. 確認・調整・最終レビュー | YYYY/MM/DD | (担当者名) |

---

### **補足・注意点**  
- **開発環境とテスト・本番環境の差分を正確に把握** し、不要な作業を省く。  
- **リストの内部名（Internal Name）に注意** し、一貫性を持たせる。  
- **データ移行が発生する場合、事前にバックアップを取得** しておく。  
- **移行後の動作テストを実施** し、問題がないことを確認する。  

---

### **指示対象者**  
- **(担当者名)**  

### **指示日**  
- **YYYY/MM/DD**  

### **指示者**  
- **(指示者名)**  

以上の流れで作業を進めてください。質問があれば適宜確認をお願いします。

**ER図作成における注意点**  

---

### **1. ER図の基本構成**  
ER図では、本システムにおける **SharePoint リスト** および **ドキュメントライブラリ** をデータベースのテーブルとして整理し、以下の要素を明確に可視化します。  

- **エンティティ（テーブル）:**  
  - SharePoint リスト  
  - ドキュメントライブラリ  
- **属性（列情報）:**  
  - 各リスト・ライブラリのカラム（列名・内部名・データ型）  
- **リレーション（関連性）:**  
  - 主となる「申請情報」リストの **内部ID（ID列）** をキーとして、他のリストやライブラリとリレーションを組む  

---

### **2. 主リスト（「申請情報」）を中心としたリレーションの設計**  
- システム全体のリレーションは、**「申請情報」リストのID（システム列「ID」）を基準に構成** される。  
- 他のリストやライブラリは、この **IDを参照する形でLookup列** を用いて関連付ける。  
- ER図では、各リストのIDが「申請情報」リストのIDとどのように紐づくのかを矢印（リレーション線）で示す。  

---

### **3. 一対多のデータ管理（JSONファイルを用いたリレーション）**  
- **データ量が増加する可能性のあるリスト**（複数レコードを持つデータ）は、SharePoint リストではなく **JSONファイル** に格納。  
- JSONファイルは **ドキュメントライブラリに保存** し、メタデータを利用して「申請情報」リストのIDとリレーションを組む。  
- **ER図の表現方法:**  
  - **JSONファイルの内容は可視化しない（作業保留）**  
  - 代わりに、**JSONファイルが保存されるドキュメントライブラリのメタデータをER図に列挙する**  

**例:**  
- ドキュメントライブラリ「申請データJSON」  
  - メタデータ:  
    - `申請ID（Lookup: 申請情報.ID）`  
    - `作成日`  
    - `更新日`  
    - `データ種別（例: コメント履歴、承認履歴 など）`  
    - `ファイル名`  

---

### **4. ER図における具体的な表現**  
- **SharePoint リスト:** 四角形で表現し、各列情報（内部名・データ型）を記載する。  
- **ドキュメントライブラリ:** リストと同様に表現し、JSONファイルを格納するフォルダ構造を示す。  
- **リレーション:**  
  - 申請情報リストのIDをキーとしたリレーションを明示。  
  - JSONファイルとのリレーションは、メタデータを利用していることを注記する。  
- **JSONファイルの詳細:**  
  - JSONのプロパティ情報は **一旦保留**（記載不要）  
  - 代わりに、ドキュメントライブラリのメタデータを列挙  

---

### **5. まとめ（ER図作成時の注意点）**  
- **「申請情報」リストのIDを中心にリレーションを統一する。**  
- **JSONファイルのプロパティは記載せず、メタデータのみER図に反映する。**  
- **リスト・ライブラリのカラム情報を正確に整理し、ER図に反映する。**  
- **各リスト・ライブラリの役割が明確になるように構造を可視化する。**  

以上の点に留意し、ER図の作成を進めてください。
